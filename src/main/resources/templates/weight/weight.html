<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="kr">
<head>
    <meta charset="UTF-8">
    <link th:href="@{/css/header.css}" rel="stylesheet">
    <link th:href="@{/css/alarm/alarm.css}" rel="stylesheet">
    <script th:src="@{/js/weight/weight.js}"></script>
    <title>체중</title>
</head>
<body>
<input type="hidden" id="weight-history-get-action" th:attr="value=@{/weight-history}">
<input type="hidden" id="weight-put-action" th:attr="value=@{/weight-history}">
<div th:replace="header :: #header"></div>
<div id="body" th:if="${type} == ${T(withus.entity.User.Type).PATIENT}">
    <!-- 환자가 로그인 중 -->
    <form id="weight-form" th:action="@{/weight}" onsubmit="return onFormSubmission(this);">
        <input type="hidden" name="id" th:value="${weight?.id}">
        <div>체중</div>
        <div>
            <p>매일 같은 시간에 체중을 측정해주세요.</p>
            <p th:each="weight :${weightRecord}" th:text="${weight.weight} + kg"></p>
            <input type="text" name="weight" onkeypress="return isNumberKey(event)"
                   onkeyup="this.value=this.value.replace(/[\ㄱ-ㅎㅏ-ㅣ가-힣]/g, '');"
                   th:value="${weight?.weight}">
        </div>
        <div>
            <button id="date" name="date" th:value="${weight?.date}" type="button" onclick="setFinished(true);">입력</button>
        </div>
        <div>
            <button id="history" type="button" onclick="showWeightHistory();">체중변화 관찰</button>
        </div>
    </form>
</div>

<div id="body" th:if="${type} == ${T(withus.entity.User.Type).CAREGIVER}">
    <!-- 보호자가 로그인 중 -->
    <form id="weight-form" th:action="@{/weight}" onsubmit="return onFormSubmission(this);">
        <input type="hidden" name="id" th:value="${weight?.id}">
        <div>(보호자 로그인)체중</div>
        <div>
            <p>매일 같은 시간에 체중을 측정해주세요.</p>
            <!-- 소수점 한자리까지 숫자만 입력 가능 -->
            <p th:each="weight :${weightRecord}" th:text="${weight.weight} + kg"></p>
            <input type="text" name="weight" onkeypress="return isNumberKey(event)"
                   onkeyup="this.value=this.value.replace(/[\ㄱ-ㅎㅏ-ㅣ가-힣]/g, '');"
                   th:value="${weight?.weight}"
                   value="only read" disabled>
        </div>
        <div>
            <button id="date" name="date" th:value="${weight?.date}" type="button" onclick="setFinished(true);" disabled="disabled">입력</button>
        </div>
        <div>
            <button id="history" type="button" onclick="showWeightHistory();">체중변화 관찰</button>
        </div>
    </form>
</div>
</body>
</html>
